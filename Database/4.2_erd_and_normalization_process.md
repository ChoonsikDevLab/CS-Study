## ERD의 중요성

### ERD란?
ERD(Entity Relationship Diagram)란 엔티티의 구조를 모델링한 다이어그램으로 데이터베이스를 구성하는 요소들의 관계를 나타낸다.

ERD로 관계형 구조로 표현할 수 있는 데이터를 구성하는 데 유용할 수 있는 반면, 비정형 데이터를 충분히 표현할 수 없다는 단점이 있다.

![ERD](https://inblog.ai/_next/image?url=https%3A%2F%2Fwww.notion.so%2Fimage%2Fhttps%253A%252F%252Fprod-files-secure.s3.us-west-2.amazonaws.com%252F83c75a39-3aba-4ba4-a792-7aefe4b07895%252F72448d03-4bf4-4bff-81b4-775a532f4a0d%252FUntitled.png%3Ftable%3Dblock%26id%3Db9b46a50-a8ad-4cf5-95a7-ec682e1254c3%26cache%3Dv2&w=3840&q=75)
> 이미지 출처: [[개념 콕] ERD](https://nbcamp.spartacodingclub.kr/blog/%EA%B0%9C%EB%85%90-%EC%BD%95-%EC%9B%B9-%EA%B0%9C%EB%B0%9C-%EC%A7%80%EC%8B%9D-%ED%8E%B8-erd-21324)

<br>

### ERD의 중요성

ERD를 활용해 데이터베이스의 구조를 명확하게 정의해 두면 유지보수가 용이하다.

반대로, 모델링 없이 데이터베이스와 테이블을 만들면 유지보수가 어려워지고, 추후 데이터베이스의 구조를 수정해야 할 가능성이 높아진다.
또한 데이터의 중복과 불일치가 발생할 가능성을 높여 데이터베이스에 대한 질의의 성능도 저하시킬 수 있다.

때문에 ERD를 활용한 데이터베이스의 모델링은 데이터베이스의 효율적인 데이터 관리에 있어 매우 중요하다.

<br>

## 정규화 과정

정규화 과정은 릴레이션 간의 잘못된 종속 관계로 인해 데이터베이스 이상 현상이 일어나서 이를 해결하거나, 저장 공간을 효율적으로 사용하기 위해 릴레이션을 여러 개로 분리하는 과정이다.

### 이상 현상

- 삽입 이상(insertion anomaly)<br>
새로운 데이터를 삽입할 때 불필요한 데이터가 함께 삽입되는 현상이다.
- 갱신 이상(update anomaly)<br>
중복된 데이터 값 중 일부 값만 변경함으로써 데이터가 불일치되는 현상이다.
- 삭제 이상(delete anomaly)<br>
특정 데이터를 삭제할 때 다른 데이터까지 삭제되는 현상이다.

### 정규형 원칙

- **제1정규형**<br>
    릴레이션의 모든 도메인이 더 이상 분해될 수 없는 원자값으로만 구성되어야 한다.<br>
    즉, 릴레이션의 속성 값 중에서 한 개의 기본키에 대해 두 개 이상의 값을 가지는 반복 집합이 있어서는 안 된다.

    ![정규화-제1정규형](https://github.com/user-attachments/assets/4887726a-5a12-4fdf-b722-3cda49f17b48)


<br>

- **제2정규형**<br>
    제1 정규형을 만족함과 동시에, 기본 키가 아닌 모든 필드들이 모든 기본 키에 완전 함수 종속이라는 조건을 만족하는 상태를 의미한다.

    > 특정 필드 X의 값을 통해 특정 필드 Y의 유일한 값이 결정될 경우 Y가 X에 종속적이라고 표현한다.<br>
    이때 X를 결정자, Y를 종속자라고 한다.

    > **부분 함수 종속성**<br>
    : 기본 키가 아닌 필드가 기본 키의 일부에 종속되어 있는 경우를 표현한다.<br><br>
    **완전 함수 종속성**<br>
    : 기본 키 전체에 완전하게 종속되어 있는 경우를 표현한다.

    ![정규화-제2정규형수정](https://github.com/user-attachments/assets/cffb1191-62e0-4ef7-8804-bfa6aa5f4044)


<br>

- **제3정규형** <br>
    제2 정규형을 만족하면서, 기본 키가 아닌 모든 필드가 기본 키에 **이행적 종속성이 없는 상태**를 의미한다.
     > **이행적 종속 관계**<br>
    어떤 테이블에 A, B, C라는 필드가 있을 때 A가 B를 결정하고(A->B) B가 C를 결정한다면(B->C) A도 C를 결정하게 되어(A->C) 종속 관계를 형성한다. <br>
    이때 필드 A와 C 사이에는 이행적 종속 관계, 이행 함수 종속성이 있다고 표현한다.

    ![정규화-제3정규형수정](https://github.com/user-attachments/assets/42e92b3a-24d5-4b03-927e-3f9ad99e7358)


<br>

- **보이스/코드 정규형(BCNF)**<br>
    제3 정규형을 만족하는 동시에 모든 결정자가 후보 키여야 한다는 조건이다.

    > 결정자: 특정 필드를 식별할 수 있는 필드<br>
    필드 A가 필드 B를 결정할 경우(B가 A에 종속적일 경우) A는 B의 결정자라고 할 수 있다.


특징
- 데이터 중복 감소
- 데이터 무결성 보장
- 데이터 조회시 복잡한 쿼리 및 성능 저하 가능성

<br>

### 비정규화

비정규화는 데이터 중복을 의도적으로 허용하여 쿼리 성능을 향상시키는 방식이다.
주로 읽기 성능을 최적화하기 위해 사용되며, 데이터 중복을 허용하고 일부 정규화를 포기하여
복잡한 조인 연산을 줄이거나, 미리 계산된 데이터를 저장해 조회 속도를 높인다.

특징
- 빠른 데이터 조회
- 복잡한 쿼리 간소화
- 데이터 갱신, 삽입, 삭제 비용 증가
- 데이터 일관성 보장x

<br>

## 예상 질문

<details>
<summary> 
Q1. 정규화의 개념과 장단점에 대해 설명해주세요.
</summary>

<br>

    정규화는 데이터의 중복방지, 무결성을 충족시키기 위해 데이터 및 테이블을 분할하는 것을 의미합니다.
    정규화를 함으로써 이상현상을 방지할 수 있다는 장점이 있고, 릴레이션 간의 연산이 많아질 수 있다는 단점이 있습니다.

</details>

<br>

<details>
<summary> 
Q2. 비정규화에 대해 설명해주세요.
</summary>

<br>

    비정규화란 데이터 중복을 의도적으로 허용하여 쿼리 성능을 향상시키는 방식을 말합니다.

    과도한 조인 연산으로 성능이 저하되는 경우, 데이터 중복을 허용하여 조인 연산을 줄이거나, 미리 계산된 데이터를 저장해 조회 속도를 높일 수 있습니다.

    자주 사용되는 데이터를 한 테이블에 저장하거나 중복된 데이터로 관리를 통해 복잡한 쿼리를 간소화할 수 있고, 데이터 액세스 비용을 감소시키는 이점을 얻을 수 있습니다.

    반면 데이터가 중복하여 저장되므로 저장 공간이 비효율적으로 사용되고, 데이터 무결성을 유지하기 위해 추가적인 로직을 구현해야 하므로 설계 및 유지보수 복잡도가 증가합니다.
    

    +) 정규화가 필요하지 않은 상황?
    검색의 성능이 중요한 경우 비정규화를 고려할 수 있습니다.
    NoSQL 데이터베이스에서는 성능 최적화를 위해 기본적으로 데이터를 정규화하지 않습니다.

</details>

<br>


<details>
<summary> 
Q3. 이상 현상에 대해서 설명해주세요.
</summary>

<br>

    이상현상은 데이터베이스 설계에서 정규화를 적절히 수행하지 않은 경우 발생하는 데이터 무결성 문제를 말합니다. 주로 데이터의 삽입, 삭제, 갱신 작업에서 문제가 발생하며, 데이터가 중복되거나 비효율적인 구조로 저장되어 있을 때 발생할 가능성이 높습니다.

    - 삽입 이상: 데이터를 삽입할 때 불필요한 추가 정보도 함께 입력됨
    - 삭제 이상: 특정 데이터를 삭제하면 관련된 다른 데이터도 함께 삭제됨
    - 갱신 이상: 중복된 데이터가 여러 곳에 저장되어 있을 때, 하나의 값을 수정하면 관련된 다른 데이터도 모두 수정해야 함

    이러한 이상현상은 데이터 정규화를 통해 해결할 수 있습니다.

</details>

<br>

## 참고 자료
- [면접을 위한 CS 전공지식 노트](https://product.kyobobook.co.kr/detail/S000001834833)
- [이것이 취업을 위한 컴퓨터 과학이다 with CS 기술 면접](https://product.kyobobook.co.kr/detail/S000214014967)
- [tech_interview.zip](https://github.com/4z7l/tech_interview.zip/blob/main/%EC%A7%81%EB%AC%B4/Database.md)
